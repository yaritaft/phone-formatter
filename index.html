<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Estandarizador en vivo</title>
    <style>
      body {
        font-family: sans-serif;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 2rem;
      }
      .container {
        display: flex;
        gap: 20px;
        width: 100%;
        max-width: 1000px;
      }
      textarea {
        width: 100%;
        height: 400px;
        padding: 10px;
        font-family: monospace;
      }
      label {
        margin-top: 1rem;
      }
    </style>
  </head>
  <body>
    <h2>Estandarizador de Tel√©fonos</h2>

    <label for="defaultCountry"
      >C√≥digo de pa√≠s por defecto (si no tiene +):</label
    >
    <input type="text" id="defaultCountry" value="AR" maxlength="2" />

    <div class="container">
      <div>
        <h4>üì• Peg√° los n√∫meros aqu√≠</h4>
        <textarea
          id="inputNumbers"
          placeholder="Ej:&#10;1133344455&#10;+5491133344455"
        ></textarea>
      </div>
      <div>
        <h4>üì§ N√∫meros estandarizados</h4>
        <textarea id="outputNumbers" readonly></textarea>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/libphonenumber-js@1.10.21/bundle/libphonenumber-js.min.js"></script>
    <script>
      const input = document.getElementById("inputNumbers");
      const output = document.getElementById("outputNumbers");
      const countryInput = document.getElementById("defaultCountry");

      function estandarizar() {
        const defaultCountry = countryInput.value.trim().toUpperCase();
        const lines = input.value.split("\n");
        const results = lines.map((line) => {
          const raw = line.trim().replace(/["'\s]/g, "");
          if (!raw) return "";
          try {
            const parsed = raw.startsWith("+")
              ? libphonenumber.parsePhoneNumber(raw)
              : libphonenumber.parsePhoneNumber(raw, defaultCountry);
            return parsed.number;
          } catch {
            return "‚ùå INV√ÅLIDO";
          }
        });
        output.value = results.join("\n");
      }

      input.addEventListener("input", estandarizar);
      countryInput.addEventListener("input", estandarizar);
    </script>
  </body>
</html>
